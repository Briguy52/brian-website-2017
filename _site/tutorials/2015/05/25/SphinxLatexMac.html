<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="The personal website of Brian M. Lin" />
    <meta name="author" content="" />
    <meta name="keywords" content="brian, lin, duke, university, robotics, club, engineer, hardware, 3d printing" />
    <link rel="canonical" href="http://briguy52.github.io/tutorials/2015/05/25/SphinxLatexMac.html">
    
    <title>Brian Lin  | LaTeX PDF Creation with Sphinx</title>

    <!-- Bootstrap Core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/css/grayscale.css" rel="stylesheet">
    <link href="/css/timeline.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
</head>


  <body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">

  <!-- Navigation -->
<nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                <i class="fa fa-bars"></i>
            </button>
            
              <a class="navbar-brand page-scroll" href="/index.html#page-top">
            
            <div><img src="/img/donutCatSmall.jpg" alt="" width="30">  Brian Lin</div>
          </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
            <ul class="nav navbar-nav">
                <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                <li class="hidden">
                    <a href="#page-top"></a>
                </li>
                
                  <!-- Blog, Post, Tag pages-->
                  
                    
                      <li>
                        <a class="page-scroll" href="/index.html#about"> About </a>
                      </li>
                    
                  
                    
                      <li>
                        <a class="page-scroll" href="/blog/index.html"> Blog </a>
                      </li>
                    
                  
                    
                      <li>
                        <a class="page-scroll" href="/index.html#career"> Career </a>
                      </li>
                    
                  
                    
                      <li>
                        <a class="page-scroll" href="/index.html#contact"> Contact </a>
                      </li>
                    
                  

                

            </ul>
        </div>
    </div>
</nav>


  <div class="canvas-wrap">
    <div class="canvas-content">
    </div>
    <div id="canvas" class="gradient"></div>
  </div>

  <div id="page_content">

    <section id="LaTeX PDF Creation with Sphinx" class="container content-section text-center">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2">

          <h1><strong>LaTeX PDF Creation with Sphinx</strong></h1>
        	<h4><strong>25 May 2015</strong>
            <small> . tutorials . <a href="/tutorials/2015/05/25/SphinxLatexMac.html#disqus_thread">Comments</a><p/>
            
              <a href="/tags/sphinx.html">#sphinx</a>
            
              <a href="/tags/latex.html">#latex</a>
            
              <a href="/tags/tutorials.html">#tutorials</a>
            
              <a href="/tags/pdf.html">#pdf</a>
            
              <a href="/tags/python.html">#python</a>
            
              <a href="/tags/documentation.html">#documentation</a>
            
            </small>
          </h4>

        	<h4 id="introduction">Introduction</h4>

<p>This will be a close-to-comprehensive guide on how to get started creating PDF and LaTeX files from .rst (reStructuredText) using Sphinx. If you’re not familiar with Sphinx, it’s a documentation generator that takes .rst files and converts them into other formats (such as HTML, PDF, LaTeX, etc.)</p>

<p>Recommended knowledge:</p>

<blockquote>
  <p>A basic understanding of programming (preferably Python)</p>

  <p>Familiarity with basic Mac Terminal concepts and commands (<code>open,cd,ls,pwd,sudo</code>,etc.) </p>

  <p>You can visit Duke’s <a href="http://pundit.pratt.duke.edu/wiki/UNIX_Tutorial">Unix Tutorial</a> for some good examples and explanations. </p>

  <p>A good deal of patience and Google-fu when you get stuck!</p>
</blockquote>

<p>Note: While you don’t need to be familiar with LaTeX formatting (since Sphinx and MacTeX will do that for you), if you need to do any ‘White Box’ work, it will come in handy!</p>

<h4 id="installation">Installation</h4>

<p>Your Mac should come with Python 2.7 installed. You may install Python 3 if you wish, but this writeup will use Python 2.7 because that is what I have.</p>

<p>Install Sphinx according to the <a href="http://sphinx-doc.org/latest/install.html">documentation</a> on their website. I used MacPorts to install Sphinx as they recommended and then did the ‘quick start’ setup. Google ‘Sphinx QuickStart’ for a thorough explanation of the process.</p>

<p>Download and install <a href="https://tug.org/mactex/">MacTeX</a>. Make sure you download the package with Safari and have sufficient space on your computer. I believe the full package (which you need) takes up around 4-5 gb of space. Note: if space is an issue, you may want to consider avoiding LaTeX and trying rst2pdf or a similar Sphinx extension. However, these alternatives will not be covered in this tutorial.</p>

<h4 id="anatomy-of-a-sphinx-main-directory">Anatomy of a Sphinx Main Directory</h4>

<p>There are many files and folders created within your Main Directory. In this writeup, we will only concern ourselves with the relevant ones: conf.py, Makefile, _build, and index.rst. </p>

<p><strong>conf.py</strong> is our configuration file. This contains your settings from the Sphinx quick start. We can also add extensions (such as rst2pdf) as well as additional options (such as LaTeX, PDF, or HTML options). Since this is a Python script (due to the .py extension), make sure you follow correct Python formatting. If you do not know Python formatting, copy-paste is your friend. Note: a common syntax error arises from TextEdit modifying apostrophes from good vertical apostrophes (‘) to bad slanted apostrophes (‘). Make sure all your apostrophes are vertical!</p>

<p>The <strong>Makefile</strong> contains various command shortcuts that you can run in terminal. For example, instead of having to type in: </p>

<pre><code>sphinx-build -b latex -d _build/doctrees   . _build/latex
</code></pre>

<p>We can simply type:</p>

<pre><code>make latex 
</code></pre>

<p>Which will go into the Makefile and run the more complicated code.  </p>

<p>The <strong>_build</strong> (builddir) folder contains the files that we build. This includes both the final result (such as a PDF) as well as all the intermediate files (such as a .tex). You can name this folder whatever you want; I simply chose ‘_build’</p>

<p>Finally, you will need an <strong>index.rst</strong> file. This has to be an .rst or .txt file (depending on your config settings) and the name does not matter as long as it’s consistent with conf.py. This file will be formatted in reStructuredText (hence the .rst extension) and contains the actual content that will be translated into LaTeX and then PDF.</p>

<h4 id="config-and-makefile-setup">Config and Makefile Setup</h4>

<p>Your Makefile should come with the correct commands preset. In case you’re missing ‘latex’ and ‘latexpdf’, copy in the following:</p>

<pre><code>latex:
	$(SPHINXBUILD) -b latex $(ALLSPHINXOPTS) $(BUILDDIR)/latex
	@echo
	@echo "Build finished; the LaTeX files are in $(BUILDDIR)/latex."
	@echo "Run \`make' in that directory to run these through (pdf)latex" \
      	"(use \`make latexpdf' here to do that automatically)."

latexpdf:
	$(SPHINXBUILD) -b latex $(ALLSPHINXOPTS) $(BUILDDIR)/latex
	@echo "Running LaTeX files through pdflatex..."
	$(MAKE) -C $(BUILDDIR)/latex all-pdf
	@echo "pdflatex finished; the PDF files are in $(BUILDDIR)/latex."
</code></pre>

<p>Note that <code>latexpdf</code> contains the <code>latex</code> command along with the <code>make all-pdf</code> command.</p>

<p>In your <code>conf.py</code> file, you should find a section entitled <strong>Options for LaTeX output</strong>. Read through it and modify the presets to fit your project. For most, that means specifying your desired document title and source in the <code>latex_document</code> setting. </p>

<h4 id="tex-and-pdf-creation">.tex and PDF Creation</h4>

<p>If all your files are the correct places (i.e. from your directory you should be able to see Makefile, conf.py, _build, and index.rst), all that you need to do now is type in:</p>

<pre><code>make latexpdf
</code></pre>

<p>It will take a couple moments, but then you will find your freshly created filename.pdf in your _build/latex folder (along with all the intermediate files). </p>

<h4 id="pdflatex-issues">pdflatex Issues</h4>

<p>You may have encountered an error about <code>pdflatex not found</code> or something of the sort. <code>pdflatex</code> is an executable that comes along with MacTeX. But even after installing the full MacTeX package, I was still getting this error! </p>

<p>After some Googling, I found a very helpful <a href="https://support.rstudio.com/hc/communities/public/questions/201410073-pdflatex-error-on-OSX">post</a> on R Studio. </p>

<p>User Dave Dyer suggested entering the following lines into your terminal:</p>

<pre><code>sudo ln -s /Library/TeX/Distributions/.DefaultTeX/Contents/Programs/texbin/usr/texbin
sudo ln -s /usr/texbin/pdflatex /usr/bin/pdflatex 
</code></pre>

<p>And that did it for me! Basically, even though you have the <code>pdflatex</code> file installed, Sphinx can’t find it when you run the <code>make latexpdf</code> command. To fix this, you simply need to specify the correct file paths using the <code>ln</code> command (link). </p>

<h4 id="creating-multiple-pdfs">Creating Multiple PDFs</h4>

<p>You may want to create multiple PDFs using multiple .rst files. The intuitive way to do this would be to simply go folder by folder and repeat this process. (I am currently working on a more elegant solution that retains the single ‘make latexpdf’ process).</p>

<p>First, I recommend that you familiarize yourself with the <code>sphinx-build</code> command’s many options that can be found in Sphinx’s <a href="http://sphinx-doc.org/invocation.html">documentation</a>. The ones that we will cover are <code>-b, -d, and -c</code>.</p>

<p>Here is the general format for <code>sphinx-build</code>:</p>

<pre><code>$ sphinx-build [options] sourcedir builddir [filenames]
</code></pre>

<p>‘-b’ gives the <code>buildername</code>, such as <code>html</code> or <code>latex</code>. We will be using <code>latex</code>.</p>

<p>‘-d’ specifies the path within the source directory. This is what’s used when we run ‘make latex’</p>

<p>‘-c’ specifies the path somewhere other than the source directory. This is what we will use.</p>

<p>To convert your .rst file into a .tex file, run the following:</p>

<pre><code>sphinx-build -b latex -c /foo/bar/folder . /foo/bar/folder/_build/latex
</code></pre>

<p>This takes the index.rst file in <code>folder</code> and outputs a corresponding .tex file within <code>folder/_build/latex</code>.</p>

<p>Now, <code>cd</code> over to the .tex file’s folder:</p>

<pre><code>cd /foo/bar/folder/_build/latex
</code></pre>

<p>And let’s convert everything there to PDF:</p>

<pre><code>make all-pdf
</code></pre>

<p>As the name implies, <code>make all-pdf</code> converts all the .tex files in a folder to PDFs. If you have multiple .rst files, have them output their .tex files to the same folder (such as <code>/home/_build/latex</code>) and then run <code>make all-pdf</code> at the very end.</p>

<p>This <a href="https://groups.google.com/forum/#!topic/sphinx-users/XNnVdAhTC7A">Google groups post</a> started by Lenz Grimmer was especially helpful to me. I recommend you give it a skim. </p>

<h4 id="closing">Closing</h4>

<p>Thank you for reading this writeup! I will update this article as a I learn new things and encounter new obstacles. Pictures and screenshots will be added soon though they shouldn’t be necessary to understand the process.</p>

<p>Please contact me with any questions, suggestions, or criticisms at bri@nmlin.org. </p>

<p><em>Last updated: Tuesday, May 26th, 2015</em></p>


        	<div>

  <div style="float:left; padding: 0 5px; vertical-align:top">
    <div class="fb-share-button" data-href="http://briguy52.github.io/tutorials/2015/05/25/SphinxLatexMac.html" data-layout="button_count"></div>
  </div>



  <div style="float:left; padding: 0 5px; vertical-align:top">
    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://briguy52.github.io/tutorials/2015/05/25/SphinxLatexMac.html" data-text="LaTeX PDF Creation with Sphinx #sphinx #latex #tutorials #pdf #python #documentation "></a>
</div>



  <div style="float:left; padding: 0 5px; vertical-align:top">
    <script type="text/javascript">reddit_newwindow='1'</script>
    <script type="text/javascript">reddit_title='LaTeX PDF Creation with Sphinx'</script>
    <script type="text/javascript">reddit_url='http://briguy52.github.io//tutorials/2015/05/25/SphinxLatexMac.html'</script>
    <script type="text/javascript" src="//www.redditstatic.com/button/button1.js"></script>
  </div>

</div>


          


        </div>
      </div>
    </section>

    <section id="LaTeX PDF Creation with Sphinx" class="container content-section text-center">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
  	<ul class="list-inline social-buttons">
  
    <li><a href="https://www.facebook.com/brian.lin.5059" target="_blank"><i class="fa fa-facebook fa-fw"></i></a></li>
  
    <li><a href="https://github.com/briguy52" target="_blank"><i class="fa fa-github fa-fw"></i></a></li>
  
    <li><a href="https://www.linkedin.com/in/brianmlin" target="_blank"><i class="fa fa-linkedin fa-fw"></i></a></li>
  
</ul>

        </div>
      </div>
    </section>

       <!-- Footer -->
    <footer>
        <div class="container text-center">
            <p>Copyright &copy;  2015</p>
        </div>
    </footer>

    <!-- jQuery -->
<script src="/js/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Plugin JavaScript -->
<script src="/js/jquery.easing.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/grayscale.js"></script>

<script src="/js/three.min.js"></script>

<!-- Helpers -->
<script src="/js/projector.js"></script>
<script src="/js/canvas-renderer.js"></script>

<!-- Visualitzation adjustments -->
<script src="/js/3d-lines-animation.js"></script>

<!-- Animated background color -->
<script src="/js/color.js"></script>





  <!-- Share buttons -->

  
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  

  
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
  

  <!-- Disqus -->

  





  <!-- Comments counter -->

  <script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = ''; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
  </script>



  </div>

  </body>
</html>
